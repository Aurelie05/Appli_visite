import{b as x,r,j as s}from"./app-Ckhq5xyA.js";import{A as j}from"./AuthenticatedLayout-CqeBbKd9.js";/* empty css            */import"./logoINP.75e5c7a93c30dc493d7f-D84s77X7.js";function b(){const{stats:a,weeklyData:c,recentVisitors:l}=x().props,[n,d]=r.useState(l),t=e=>e>=0?"#10b981":"#ef4444",o=e=>new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),h=e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return r.useEffect(()=>{if(console.log("Initialisation de la connexion WebSocket..."),!window.Echo){console.error("Echo n'est pas disponible - vÃ©rifiez les variables d'environnement");return}return console.log('Abonnement au canal "visiteurs"'),window.Echo.channel("visiteurs").listen("nouveau-visiteur",i=>{console.log("Ã‰vÃ©nement reÃ§u:",i),d(m=>[i.visiteur,...m])}).error(i=>{console.error("Erreur avec le canal:",i)}),()=>{console.log('Nettoyage: quitter le canal "visiteurs"'),window.Echo.leave("visiteurs")}},[]),s.jsx(j,{children:s.jsxs("div",{className:"dashboard-container",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsx("h1",{className:"dashboard-title",children:"Tableau de Bord"}),s.jsx("p",{className:"dashboard-subtitle",children:"AperÃ§u des visites et statistiques"})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon daily",children:s.jsx("span",{children:"ðŸ“Š"})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h3",{className:"stat-title",children:"Visites du jour"}),s.jsx("p",{className:"stat-number",children:a.daily}),s.jsxs("div",{className:"stat-trend",style:{color:t(a.dailyTrend)},children:[a.dailyTrend>=0?"â†—":"â†˜"," ",Math.abs(a.dailyTrend),"%"]})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon weekly",children:s.jsx("span",{children:"ðŸ“ˆ"})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h3",{className:"stat-title",children:"Visites semaine"}),s.jsx("p",{className:"stat-number",children:a.weekly}),s.jsxs("div",{className:"stat-trend",style:{color:t(a.weeklyTrend)},children:[a.weeklyTrend>=0?"â†—":"â†˜"," ",Math.abs(a.weeklyTrend),"%"]})]})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-icon monthly",children:s.jsx("span",{children:"ðŸ“…"})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h3",{className:"stat-title",children:"Visites mois"}),s.jsx("p",{className:"stat-number",children:a.monthly}),s.jsxs("div",{className:"stat-trend",style:{color:t(a.monthlyTrend)},children:[a.monthlyTrend>=0?"â†—":"â†˜"," ",Math.abs(a.monthlyTrend),"%"]})]})]})]}),s.jsxs("div",{className:"dashboard-content",children:[s.jsxs("div",{className:"chart-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"section-title",children:"Statistiques Hebdomadaires"}),s.jsx("span",{className:"section-badge",children:"7 jours"})]}),s.jsx("div",{className:"chart-container",children:c.map((e,i)=>s.jsxs("div",{className:"chart-bar-group",children:[s.jsx("div",{className:"bar-container",children:s.jsx("div",{className:"chart-bar",style:{height:`${Math.max(e.visits*8,30)}px`},title:`${e.visits} visites`,children:s.jsx("span",{className:"bar-value",children:e.visits})})}),s.jsxs("div",{className:"bar-label",children:[s.jsx("span",{className:"day-name",children:e.day}),s.jsx("span",{className:"day-date",children:e.date})]})]},i))})]}),s.jsxs("div",{className:"recent-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"section-title",children:"Visiteurs RÃ©cents"}),s.jsxs("span",{className:"section-badge",children:[n.length," visiteurs"]})]}),s.jsx("div",{className:"visitors-list",children:n.map(e=>s.jsxs("div",{className:"visitor-card",children:[s.jsxs("div",{className:"visitor-avatar",children:[e.prenom.charAt(0),e.nom.charAt(0)]}),s.jsxs("div",{className:"visitor-info",children:[s.jsxs("div",{className:"visitor-name",children:[e.prenom," ",e.nom]}),s.jsxs("div",{className:"visitor-details",children:[s.jsxs("span",{className:"visitor-contact",children:["ðŸ‘¤ ",e.personne_a_rencontrer]}),s.jsxs("span",{className:"visitor-motive",children:["ðŸŽ¯ ",e.motif_visite]})]}),s.jsxs("div",{className:"visitor-date",children:["ðŸ“… ",h(e.heure_entree)]})]}),s.jsx("div",{className:"visitor-time",children:o(e.heure_entree)})]},e.id))})]})]})]})})}export{b as default};
