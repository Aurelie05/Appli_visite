import{b as y,u as w,r as i,j as e,H as _,a as E}from"./app-BA-PZ8Uf.js";import{G as k}from"./GuestLayout-CsuZSPzU.js";import{F}from"./Footer-8xUA28d4.js";/* empty css            */import"./logoINP.75e5c7a93c30dc493d7f-D84s77X7.js";const B=({photo_cni:p,error_ocr:c,ocr_debug:d,nom:a="",prenom:l="",numero_cni:o=""})=>{const{props:h}=y(),{numero_badge:b,message_success:f}=h,{data:t,setData:n,post:g,processing:m,errors:r,reset:j}=w({photo_cni:p||"",nom:a,prenom:l,numero_cni:o,telephone:"",personne_a_rencontrer:"",motif_visite:""}),[N,x]=i.useState(!1);i.useEffect(()=>{(a||l||o)&&n({...t,nom:a,prenom:l,numero_cni:o})},[a,l,o]),i.useEffect(()=>{if(!window.Echo){console.warn("Echo non disponible");return}try{const s=window.Echo.channel("visiteurs");return s.listen(".nouveau-visiteur",u=>{console.log("Nouveau visiteur:",u)}),()=>{s&&typeof s.stopListening=="function"&&s.stopListening(".nouveau-visiteur")}}catch(s){console.warn("Erreur dans la gestion des channels Echo:",s)}},[]);const v=s=>{s.preventDefault(),g("/visiteurs",{onSuccess:u=>{x(!0),j("nom","prenom","numero_cni","telephone","personne_a_rencontrer","motif_visite")}})};return e.jsxs(k,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:[e.jsx(_,{title:"Formulaire d'enregistrement - INPHB"}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Formulaire d'enregistrement"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Compl√©tez les informations du visiteur pour finaliser l'enregistrement"})]}),c&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-yellow-400 text-lg",children:"‚ö†Ô∏è"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-yellow-700 text-sm",children:c})})]})}),d&&e.jsxs("div",{className:"bg-gray-100 border border-gray-300 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:"DEBUG OCR:"}),e.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap overflow-auto max-h-40",children:d})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üë§"}),"Informations du visiteur"]})}),e.jsxs("div",{className:"p-6 md:p-8",children:[t.photo_cni&&e.jsxs("div",{className:"mb-8 text-center bg-gray-50 rounded-xl p-6 border-2 border-dashed border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"üì∑"}),"Photo de la pi√®ce d'identit√© scann√©e"]}),e.jsx("img",{src:`/storage/${t.photo_cni}`,alt:"CNI captur√©e",className:"mx-auto w-56 h-72 object-cover border-2 border-gray-300 rounded-xl shadow-md"})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üî§"}),"Nom *"]}),e.jsx("input",{type:"text",value:t.nom,onChange:s=>n("nom",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Entrez le nom",required:!0}),r.nom&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[e.jsx("span",{className:"mr-1",children:"‚ùå"}),r.nom]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üë§"}),"Pr√©nom *"]}),e.jsx("input",{type:"text",value:t.prenom,onChange:s=>n("prenom",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Entrez le pr√©nom",required:!0}),r.prenom&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[e.jsx("span",{className:"mr-1",children:"‚ùå"}),r.prenom]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üÜî"}),"Num√©ro CNI *"]}),e.jsx("input",{type:"text",value:t.numero_cni,onChange:s=>n("numero_cni",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Ex: CI123456789",required:!0}),r.numero_cni&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[e.jsx("span",{className:"mr-1",children:"‚ùå"}),r.numero_cni]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üìû"}),"T√©l√©phone *"]}),e.jsx("input",{type:"tel",value:t.telephone,onChange:s=>n("telephone",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Ex: 07 12 34 56 78",required:!0,pattern:"^[0-9]{10}$",title:"Le num√©ro doit contenir exactement 10 chiffres."}),r.telephone&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[e.jsx("span",{className:"mr-1",children:"‚ùå"}),r.telephone]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üéØ"}),"Personne √† rencontrer *"]}),e.jsx("input",{type:"text",value:t.personne_a_rencontrer,onChange:s=>n("personne_a_rencontrer",s.target.value),placeholder:"Ex: Dr. Yao Vincent - D√©partement Informatique",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0}),r.personne_a_rencontrer&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[e.jsx("span",{className:"mr-1",children:"‚ùå"}),r.personne_a_rencontrer]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üéØ"}),"Motif de la visite *"]}),e.jsxs("select",{value:t.motif_visite,onChange:s=>n("motif_visite",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none bg-white",required:!0,children:[e.jsx("option",{value:"",className:"text-gray-400",children:"-- S√©lectionnez le motif de votre visite --"}),e.jsx("option",{value:"depot_dossier",className:"text-gray-700",children:"üìÑ D√©p√¥t de dossier"}),e.jsx("option",{value:"entretien",className:"text-gray-700",children:"üíº Entretien"}),e.jsx("option",{value:"rendez_vous_pro",className:"text-gray-700",children:"ü§ù Rendez-vous professionnel"}),e.jsx("option",{value:"visite",className:"text-gray-700",children:"üè´ Visite des locaux"}),e.jsx("option",{value:"reunion",className:"text-gray-700",children:"üë• R√©union"}),e.jsx("option",{value:"formation",className:"text-gray-700",children:"üìö Formation"}),e.jsx("option",{value:"autre",className:"text-gray-700",children:"üìå Autre"})]}),r.motif_visite&&e.jsxs("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[e.jsx("span",{className:"mr-1",children:"‚ùå"}),r.motif_visite]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end",children:e.jsx("button",{type:"submit",disabled:m,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 px-8 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:hover:shadow-lg flex items-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Enregistrement en cours..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚úÖ"}),e.jsx("span",{children:"Enregistrer le visiteur"})]})})})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg text-center max-w-sm w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:f}),e.jsxs("p",{className:"mb-4",children:["Num√©ro de badge : ",e.jsx("strong",{children:b})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-xl hover:bg-blue-700",onClick:()=>{x(!1),E.visit("/")},children:"Fermer"})]})}),e.jsx("div",{className:"mt-6 bg-blue-50 rounded-xl p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("span",{className:"text-blue-600 text-sm",children:"üîí"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900 text-sm",children:"Protection des donn√©es"}),e.jsx("p",{className:"text-blue-700 text-xs mt-1",children:"Les informations collect√©es sont utilis√©es exclusivement pour la gestion des acc√®s √† l'INPHB et sont prot√©g√©es conform√©ment √† la r√©glementation sur la protection des donn√©es personnelles."})]})]})})]})]}),e.jsx(F,{})]})};export{B as default};
